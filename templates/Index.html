<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Sorteio de Tarefas</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>Sistema de Sorteio de Tarefas</h1>
            <p>Gerencie turmas, alunos e tarefas para realizar sorteios.</p>
            
            <button id="toggleTheme">ðŸŒ™ Mudar Tema</button>

<script>
    const toggleBtn = document.getElementById("toggleTheme");
    const body = document.body;

    if (localStorage.getItem("theme") === "dark") {
        body.classList.add("dark-mode");
    }

    toggleBtn.addEventListener("click", () => {
        body.classList.toggle("dark-mode");
        
        if (body.classList.contains("dark-mode")) {
            localStorage.setItem("theme", "dark");
        } else {
            localStorage.setItem("theme", "light");
        }
    });
</script>

        </header>
        <main>
            <section class="form-section">
                <h2>Adicionar Turma</h2>
                <form action="{{ url_for('adicionar_turma') }}" method="post">
                    <input type="text" name="nome_turma" placeholder="Nome da Turma (Ex: 3ÂºB)" required>
                    <button type="submit">Adicionar</button>
                </form>
            </section>

            <section class="form-section">
                <h2>Adicionar Aluno</h2>
                <form action="{{ url_for('adicionar_aluno') }}" method="post">
                    <input type="text" name="nome_aluno" placeholder="Nome do Aluno" required>
                    <select name="turma_id" required>
                        <option value="">Selecione a Turma</option>
                        {% for turma in turmas %}
                            <option value="{{ turma.id }}">{{ turma.nome }}</option>
                        {% endfor %}
                    </select>
                    <button type="submit">Adicionar</button>
                </form>
            </section>

            <section class="form-section">
                <h2>Adicionar Tarefa</h2>
                <form action="{{ url_for('adicionar_tarefa') }}" method="post">
                    <input type="text" name="nome_tarefa" placeholder="Nome da Tarefa (Ex: ApresentaÃ§Ã£o)" required>
                    <button type="submit">Adicionar</button>
                </form>
            </section>

            <section class="form-section draw-section">
                <h2>Realizar Sorteio</h2>
                <form action="{{ url_for('sortear') }}" method="post">
                    <div class="draw-inputs">
                        <select name="turma_sorteio_id" required>
                            <option value="">Selecione a Turma</option>
                            {% for turma in turmas %}
                                <option value="{{ turma.id }}">{{ turma.nome }}</option>
                            {% endfor %}
                        </select>
                        <select name="tarefa_sorteio_id" required>
                            <option value="">Selecione a Tarefa</option>
                            {% for tarefa in tarefas %}
                                <option value="{{ tarefa.id }}">{{ tarefa.nome }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button type="submit" class="draw-button">Sortear Aluno</button>
                </form>
            </section>

            <section class="results-section">
                <h2>Sorteios Recentes</h2>
                {% if sorteios %}
                    <table>
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Turma</th>
                                <th>Aluno Sorteado</th>
                                <th>Tarefa</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for sorteio in sorteios %}
                                <tr>
                                    <td>{{ sorteio.data_sorteio }}</td>
                                    <td>{{ sorteio.turma_nome }}</td>
                                    <td class="winner">{{ sorteio.aluno_nome }}</td>
                                    <td>{{ sorteio.tarefa_nome }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <p class="no-results">Nenhum sorteio realizado ainda.</p>
                {% endif %}
            </section>
        </main>

        <footer>
            <p>&copy; 2025 Sistema de Sorteio de Tarefas/Pedro G. Timoteo</p>
        </footer>
    </div>
</body>
</html>
